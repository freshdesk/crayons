import { Meta, Story, Canvas } from '@storybook/web-components';

export const Template = () =>{
  return `<fw-datepicker value="2021-12-02"></fw-datepicker>`;
};

export const Template_Range = () =>{
  return `<fw-datepicker
            mode="range"
            from-date="2022-01-02"
            to-date="2022-01-04"
            display-format="dd-mm-yyyy"
          ></fw-datepicker>`;
};


# Datepicker

<Meta
  title='Datepicker'
  component='fw-datepicker'
/>

## Props

<Props of="fw-datepicker"/>

## Usage

### Default
<Preview>
  <Story 
    name='Default'
    decorators={[
      (Story) => {
        const story = Story();
        return `<div>${story}</div>`;
      }
    ]}
  >
    {Template.bind({})}
  </Story>
</Preview>

### Datepicker open
<Preview>
  <Story 
    name='Datepicker open'
    play={({ canvasElement }) => {
      const timer = setTimeout(()=>{
        const datePicker = document.querySelector('fw-datepicker');
        datePicker.focus();
        datePicker.shadowRoot.querySelector('fw-popover').querySelector('fw-input').click();
        clearTimeout(timer);
      }, 500);
    }}
    decorators={[
      (Story) => {
        const story = Story();
        return `<div>${story}</div>`;
      }
    ]}
  >
    {Template.bind({})}
  </Story>
</Preview>

### datepicker month open
<Preview>
  <Story 
    name='Datepicker Month Open'
    play={({ canvasElement }) => {
      // Starts querying the component from it's root element
      const timer = setTimeout(() => {
        const datePicker = document.querySelector('fw-datepicker');
        datePicker.focus();
        datePicker.shadowRoot.querySelector('fw-popover').querySelector('fw-input').click();
        const monthDropdownTimer = setTimeout(() => {
          datePicker.shadowRoot.querySelector('fw-popover').querySelector('fw-select').shadowRoot.querySelector('fw-popover').querySelector('fw-button').click();
          clearTimeout(monthDropdownTimer);
        }, 500);
        clearTimeout(timer);
      }, 500);
    }}
    decorators={[
      (Story) => {
        const story = Story();
        return `<div>${story}</div>`;
      }
    ]}
  >
    {Template.bind({})}
  </Story>
</Preview>

### datepicker year open
<Preview>
  <Story 
    name='Datepicker Year Open'
    play={({ canvasElement }) => {
      // Starts querying the component from it's root element
      const timer = setTimeout(() => {
        const datePicker = document.querySelector('fw-datepicker');
        datePicker.focus();
        datePicker.shadowRoot.querySelector('fw-popover').querySelector('fw-input').click();
        const yearDropdownTimer = setTimeout(() => {
          datePicker.shadowRoot.querySelector('fw-popover').querySelectorAll('fw-select')[1].shadowRoot.querySelector('fw-popover').querySelector('fw-button').click();
          clearTimeout(yearDropdownTimer);
        }, 500);
        clearTimeout(timer);
      }, 500);
    }}
    decorators={[
      (Story) => {
        const story = Story();
        return `<div>${story}</div>`;
      }
    ]}
  >
    {Template.bind({})}
  </Story>
</Preview>

## datepicker range
<Preview>
  <Story 
    name='DatePicker Range'
    decorators={[
      (Story) => {
        const story = Story();
        return `<div>${story}</div>`;
      }
    ]}
  >
    {Template_Range.bind({})}
  </Story>
</Preview>

## datepicker range open
<Preview>
  <Story 
    name='DatePicker Range Open'
    play={({ canvasElement }) => {
      const timer = setTimeout(()=>{
        const datePicker = document.querySelector('fw-datepicker');
        datePicker.focus();
        datePicker.shadowRoot.querySelector('fw-popover').querySelector('fw-input').click();
        clearTimeout(timer);
      }, 500);
    }}
    decorators={[
      (Story) => {
        const story = Story();
        return `<div>${story}</div>`;
      }
    ]}
  >
    {Template_Range.bind({})}
  </Story>
</Preview>

### minDate and maxDate specified
<Preview>
<Story name='minDate and maxDate specified'>{() => '<fw-datepicker min-date="2020-04-10" max-date="2020-09-29"></fw-datepicker>'}</Story>
</Preview>

### Date Format and Placeholder specified
<Preview>
<Story name='Date Format and Placeholder specified'>{() => '<fw-datepicker display-format="dd-MMMM-yyyy" placeholder="Pick a Date"></fw-datepicker>'}</Story>
</Preview>
