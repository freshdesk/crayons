{#each radioItems as item}
<label class="container" >{item.textContent} 
  <input type="radio" {...props}>  
   <!-- on:change="radioChange(event)" -->
  {#if invalid===""}
  <span class="invalidmark"></span>
  {:else}
  <span class="checkmark"></span>{/if}
</label>

{/each}
<style>
:host {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}
 /*Customising our very own check box*/
 .container {
  display: block;
  position: relative;
  margin-top:12px;
  padding-left: 32px;
  cursor: pointer;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  font-family: SFProText;
  font-size: 14px;
  line-height: 1.43;
  color: #12344d;
}


.container input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
}


.checkmark {
  position: absolute;
  top: 0;
  left: 0;
  height: 14px;
  width: 14px;
  background-color: #fff;
  border: solid 1px #6c7684;
  border-radius: 50%;
}

.invalidmark{
  position: absolute;
  top: 0;
  left: 0;
  height: 14px;
  width: 14px;
  background-color: #fff;
  border: solid 1px #6c7684;
  border-radius: 50%;
}


.container input ~ .checkmark:hover {
  border:none;
   border: solid 2px #6f7c87;
}
.container input ~ .checkmark:focus {
 outline:none;
   border: solid 2px #2e6ed8;
}

.container input:disabled ~ .checkmark{
  border: solid 1px #cfd7df;
  background-color: #ebeef0;
  pointer-events:none
}

.container input:checked ~ .checkmark {
  border:none;
  border:2px solid #2e6ed8;
  background-color: #2e6ed8;
}
.container input:checked ~ .checkmark:hover{
background:  #003792;
  border:2px solid #003792;
}
.container input:checked ~ .checkmark:focus{
  outline:none;
background:  #2e6ed8;
  border:2px solid #fff;
box-shadow: 0 0 0 1pt #2e6ed8;
}
.checkmark:after {
  content: "";
  position: absolute;
  display: none;
}
.invalidmark:after{
  content: "";
  position: absolute;
  display: none;
}
.container input[invalid]:checked ~ .invalidmark:after {
  display:block;
}
.container input:checked ~ .checkmark:after {
  display: block;
}

.container .checkmark:after {
 	top: 4px;
	left: 4px;
	width: 6px;
	height: 6px;
	border-radius: 50%;
	background-color: #fff;
}
.container .invalidmark:after {
  top: 1px;
	left: 1px;
	width: 8px;
	height: 8px;
	border-radius: 50%;
	background: #fff;
}

.container input[invalid] ~ .invalidmark{
  border: solid 2px #f73f3e;
  background:#fff;
}

.container input[invalid]:checked ~ .invalidmark:after{
  border:none;
  background : #f73f3e;
  border:2px solid #fff;
  box-shadow: 0 0 0 2pt #f73f3e;
} 
</style>

<script>
  export default {
  tag: "fw-radio",
  props:  ["value","autofocus","checked","defaultChecked","defaultValue","disabled","form","indeterminate","name","required","invalid"],
  data(){
    return{
        radioItems : document.querySelector('fw-radio').children
    }
  },
  computed: {
      props: state => {
        Object.keys(state).forEach(key => {
          state[key] = state[key] === "" ? "" : state[key];
        });
        return state;
      } 
    },
      oncreate(){
        let prop = ["value","autofocus","checked","defaultChecked","defaultValue","disabled","form","indeterminate","required","invalid"]
      let root =  document.querySelector('fw-radio') , pItems = root.children , radios = root.shadowRoot.querySelectorAll('input')
      
      for(let i=0;i<pItems.length;i++){
          for(let j=0;j<prop.length;j++){
            if(prop[j]==="value"&&pItems[i].hasAttribute('value'))
            {
              let val = pItems[i].getAttribute('value')
              radios[i].setAttribute('value',val)
              radios[i].value =val; pItems[i].value =val
            }
            else if(pItems[i].hasAttribute(prop[j]))
            {
              radios[i].setAttribute(`${prop[j]}`,"")
              // radios[i].prop[j] =true ;pItems[i].prop[j] = true
            }
          }
        } 
        
        },
    
   onupdate(){
console.log("Updated in onupdate")
},

    methods:{
    //   radioChange : (ev)=>{
    //     let i,root =  document.querySelector('fw-radio') , pItems = root.children,radios = root.shadowRoot.querySelectorAll('input');
    //     for(i=0;i<pItems.length;i++)
    //     {
    //       if(pItems[i].hasAttribute('checked'))
    //       {
    //       pItems[i].removeAttribute('checked')
    //       break
    //       }
    //     }

    //     for(i=0;i<radios.length;i++)
    //     {
    //       if(radios[i]==ev.target)
    //       break;
    //     }
    //     pItems[i].checked = ev.target.checked
    //     if(pItems[i].checked)
    //     pItems[i].setAttribute('checked','')
    // }
  }
  };

</script>
