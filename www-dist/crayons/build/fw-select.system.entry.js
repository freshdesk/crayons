var __awaiter=this&&this.__awaiter||function(t,e,i,n){function o(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function s(t){try{l(n["throw"](t))}catch(e){r(e)}}function l(t){t.done?i(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,o,r,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return l([t,e])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,o&&(r=a[0]&2?o["return"]:a[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;if(o=0,r)a=[a[0]&2,r.value];switch(a[0]){case 0:case 1:r=a;break;case 4:i.label++;return{value:a[1],done:false};case 5:i.label++;o=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(r=i.trys,r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(a[0]===6&&i.label<r[1]){i.label=r[1];r=a;break}if(r&&i.label<r[2]){i.label=r[2];i.ops.push(a);break}if(r[2])i.ops.pop();i.trys.pop();continue}a=e.call(t,i)}catch(s){a=[6,s];o=0}finally{n=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(t,e){for(var i=0,n=e.length,o=t.length;i<n;i++,o++)t[o]=e[i];return t};System.register(["./index-c04bc24f.system.js","./index-8c48a083.system.js","./field-control-3422d0ba.system.js","./Translation-23f322dd.system.js"],(function(t){"use strict";var e,i,n,o,r,a,s,l,c,u;return{setters:[function(t){e=t.r;i=t.h;n=t.i;o=t.F;r=t.j},function(t){a=t.b;s=t.r;l=t.h},function(t){c=t.F},function(t){u=t.i}],execute:function(){var h=':host{font-family:var(--fw-font-family, -apple-system, blinkmacsystemfont, "Segoe UI", roboto, oxygen, ubuntu, cantarell, "Open Sans", "Helvetica Neue", sans-serif);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}.field-control{position:relative}.field-control-label{display:block;font-size:12px;color:var(--fw-label-color, #475867);font-weight:600;-webkit-margin-after:4px;margin-block-end:4px;-webkit-padding-start:2px;padding-inline-start:2px;line-height:20px}.field-control-label.required::after{content:"*";position:relative;display:inline-block;inset-block-start:2px;font-size:14px;color:#d72d30;-webkit-padding-start:2px;padding-inline-start:2px;font-weight:700}.field-control-hint-text{font-family:-apple-system, blinkmacsystemfont, "Segoe UI", "Roboto", "Helvetica Neue", arial, sans-serif;font-size:12px;line-height:20px;-webkit-margin-before:4px;margin-block-start:4px;-webkit-margin-after:0;margin-block-end:0;color:var(--fw-hint-color, #acb6be);position:inherit;display:block;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.field-control-error-text{font-family:-apple-system, blinkmacsystemfont, "Segoe UI", "Roboto", "Helvetica Neue", arial, sans-serif;font-size:12px;line-height:20px;-webkit-margin-before:4px;margin-block-start:4px;-webkit-margin-after:0;margin-block-end:0;color:var(--fw-error-color, #d72d30);position:inherit;display:block;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.field-control-warning-text{font-family:-apple-system, blinkmacsystemfont, "Segoe UI", "Roboto", "Helvetica Neue", arial, sans-serif;font-size:12px;line-height:20px;-webkit-margin-before:4px;margin-block-start:4px;-webkit-margin-after:0;margin-block-end:0;color:var(--fw-warning-color, #f8ab59);position:inherit;display:block;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}:host{display:block}.input-container{width:calc(100% - 10px);border:var(--fw-select-border, 1px solid #cfd7df);border-radius:var(--fw-select-border-radius, 4px);-webkit-padding-start:10px;padding-inline-start:10px;background-color:#fff;-webkit-box-shadow:none;box-shadow:none;min-height:22px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;}.input-container .input-container-inner{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-wrap:wrap;flex-wrap:wrap}.input-container .input-container-inner .tag-container{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.input-container .input-container-inner .tag-container fw-tag{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-after:4px;margin-block-end:4px;-webkit-margin-end:4px;margin-inline-end:4px;-webkit-margin-before:4px;margin-block-start:4px}.input-container .input-container-inner input{-ms-flex-positive:1;flex-grow:1;width:100%;border:none;font-family:inherit;font-size:14px;font-weight:500;letter-spacing:0;line-height:1.4;background-color:#fff;min-width:20px;min-height:22px;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;margin-inline:0px;margin-block:4px}.input-container .input-container-inner input:focus{border:none;outline:none}.input-container .input-container-inner input.multi-select{width:auto}.input-container .input-container-inner input:disabled{background-color:#f5f7f9 !important;border-color:transparent;cursor:not-allowed}.input-container fw-spinner{-webkit-margin-end:8px;margin-inline-end:8px}@media (prefers-reduced-motion){.input-container:hover,.input-container:focus{-webkit-transition:none;transition:none}}.input-container:hover,.input-container:focus{border:1px #475867 solid;-webkit-transition:0.2s linear;transition:0.2s linear}.input-container.error{border-color:#d72d30}.input-container.error>span.help-block{color:#d72d30}.input-container.warning{border-color:#f8ab59}.input-container.warning>span.help-block{color:#f8ab59}.input-container.select-disabled{color:#ebeff3;background-color:#f5f7f9 !important;border-style:solid;cursor:not-allowed}.input-container.select-disabled:hover{border:1px solid #cfd7df}.has-focus .input-container{outline:none;background:#fff;border:1px solid transparent;-webkit-box-shadow:0 0 0 2px #2c5cc5;box-shadow:0 0 0 2px #2c5cc5}.has-focus .input-container.error{border-color:#d72d30;-webkit-box-shadow:none;box-shadow:none}.has-focus .input-container.error>span.help-block{color:#d72d30}.has-focus .input-container.warning{border-color:#f8ab59;-webkit-box-shadow:0 0 0 1px #f8ab59;box-shadow:0 0 0 1px #f8ab59}.has-focus .input-container.warning>span.help-block{color:#f8ab59}.select-container{-webkit-margin-after:var(--fw-select-margin-bottom, 0px);margin-block-end:var(--fw-select-margin-bottom, 0px);width:inherit;height:inherit;position:relative}.select-container .dropdown{z-index:99}.select-container .dropdown-status-icon{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-webkit-margin-end:8px;margin-inline-end:8px;min-width:20px;min-height:20px;-webkit-transition:all 0.15s;transition:all 0.15s;--icon-color:$color-elephant-800}.select-container .help-block{font-size:12px;-webkit-margin-before:4px;margin-block-start:4px;line-height:20px;color:#acb6be;position:inherit;-webkit-margin-after:0;margin-block-end:0;display:block;-webkit-padding-start:2px;padding-inline-start:2px}:host(:not([dir="rtl"])) .select-container .dropdown-status-icon.expanded,:host([dir="ltr"]) .select-container .dropdown-status-icon.expanded{-webkit-transform:rotate(180deg);transform:rotate(180deg)}:host([dir="rtl"]) .select-container .dropdown-status-icon.expanded{-webkit-transform:rotate(-180deg);transform:rotate(-180deg)}.select-container.error{border-color:#d72d30}.select-container.error>span.help-block{color:#d72d30}.select-container.warning{border-color:#f8ab59}.select-container.warning>span.help-block{color:#f8ab59}::-webkit-input-placeholder{color:#92a2b1;opacity:1}::-moz-placeholder{color:#92a2b1;opacity:1}:-ms-input-placeholder{color:#92a2b1;opacity:1}::-ms-input-placeholder{color:#92a2b1;opacity:1}::placeholder{color:#92a2b1;opacity:1}:-ms-input-placeholder{color:#92a2b1}::-ms-input-placeholder{color:#92a2b1}';var p=undefined&&undefined.__decorate||function(t,e,i,n){var o=arguments.length,r=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,i):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)if(a=t[s])r=(o<3?a(r):o>3?a(e,i,r):a(e,i))||r;return o>3&&r&&Object.defineProperty(e,i,r),r};var d=t("fw_select",function(){function t(t){var n=this;e(this,t);this.fwChange=i(this,"fwChange",7);this.fwFocus=i(this,"fwFocus",7);this.fwBlur=i(this,"fwBlur",7);this.tagRefs=[];this.tagArrowKeyCounter=0;this.changeEmittable=function(){return!n.disabled};this.innerOnFocus=function(t){if(n.changeEmittable()){n.hasFocus=true;n.fwFocus.emit(t)}};this.innerOnClick=function(){var t,e;n.setFocus();n.multiple||((e=(t=n.selectInput)===null||t===void 0?void 0:t.select)===null||e===void 0?void 0:e.call(t));if(n.variant!=="mail"){n.openDropdown()}};this.innerOnBlur=function(t){if(n.changeEmittable()){n.hasFocus=false;n.fwBlur.emit({event:t,name:n.name})}};this.openDropdown=function(){if(!n.isExpanded&&n.changeEmittable()){n.popover.show()}};this.closeDropdown=function(){if(n.isExpanded&&n.changeEmittable()){n.popover.hide()}};this.isExpanded=false;this.hasFocus=false;this.didInit=false;this.selectedOptionsState=[];this.isLoading=false;this.focusedOptionId="";this.hasHintTextSlot=false;this.hasWarningTextSlot=false;this.hasErrorTextSlot=false;this.label="";this.name="";this.type="text";this.state="normal";this.readonly=false;this.required=false;this.forceSelect=true;this.disabled=false;this.multiple=false;this.max=Number.MAX_VALUE;this.variant="standard";this.optionsVariant="standard";this.searchable=true;this.checkbox=false;this.notFoundText="";this.noDataText="";this.debounceTimer=300;this.selectedOptions=[];this.sameWidth=true;this.optionsPlacement="bottom";this.tagVariant="standard";this.caret=true;this.labelledBy="";this.allowDeselect=true;this.hintText="";this.warningText="";this.errorText="";this.tagContainerKeyDown=function(t){switch(t.key){case"Escape":n.innerOnBlur(t);n.closeDropdown();break;case"ArrowLeft":n.tagArrowKeyCounter--;if(n.tagArrowKeyCounter>=0){n.focusOnTag(n.tagArrowKeyCounter)}else{n.tagArrowKeyCounter=0}t.stopImmediatePropagation();break;case"ArrowRight":n.tagArrowKeyCounter++;if(n.tagArrowKeyCounter>=n.value.length){n.selectInput.focus()}else{n.focusOnTag(n.tagArrowKeyCounter)}t.stopImmediatePropagation();break}}}t.prototype.onDropdownClose=function(){this.clearInput();this.isExpanded=false;this.multiple&&this.selectInput.focus()};t.prototype.onDropdownOpen=function(){this.isExpanded=true};t.prototype.onLoading=function(t){this.isLoading=t.detail.isLoading;if(this.variant==="mail"&&!this.isLoading){this.selectInput.value&&this.openDropdown()}};t.prototype.fwSelectedHandler=function(t){var e,i;if(t.composedPath()[0].tagName==="FW-LIST-OPTIONS"){this.selectedOptionsState=(i=(e=t.detail)===null||e===void 0?void 0:e.meta)===null||i===void 0?void 0:i.selectedOptions;this.value=t.detail.value;this.renderInput();if(!this.multiple||this.variant==="mail"){this.closeDropdown()}t.stopImmediatePropagation();t.stopPropagation();t.preventDefault();if(this.selectedOptionsState.length>0){this.fwChange.emit({name:this.name,value:this.value,meta:{selectedOptions:this.selectedOptionsState}})}else{this.fwChange.emit({name:this.name,value:this.value,meta:{shouldValidate:false,selectedOptions:this.selectedOptionsState}})}}};t.prototype.fwCloseHandler=function(t){this.value=this.value.filter((function(e){return e!==t.detail.value}))};t.prototype.onKeyDown=function(t){switch(t.key){case"ArrowDown":this.innerOnClick();this.fwListOptions.setFocus();t.preventDefault();t.stopPropagation();break;case"ArrowLeft":case"Backspace":if(this.multiple&&this.selectInput.value===""){this.focusOnTagContainer()}break;case"Escape":this.innerOnBlur(t);this.closeDropdown();break;case"Tab":this.closeDropdown();break}};t.prototype.onOptionFocus=function(t){if(t.composedPath()[0].tagName==="FW-SELECT-OPTION"){this.focusedOptionId=t.detail.id}};t.prototype.onOptionBlur=function(t){if(t.composedPath()[0].tagName==="FW-SELECT-OPTION"){this.focusedOptionId=""}};t.prototype.optionsChangedHandler=function(){this.renderInput()};t.prototype.onOptionsChange=function(t){var e=this;var i;var n=t===null||t===void 0?void 0:t.filter((function(t){return t.selected}));if(n.length>0){this.dataSource=t;this.selectedOptionsState=n;this.value=this.multiple?this.selectedOptionsState.map((function(t){return t.value})):(i=this.selectedOptionsState[0])===null||i===void 0?void 0:i.value}else if(this.valueExists()){this.dataSource=t.map((function(t){return Object.assign(Object.assign({},t),{selected:e.isValueEqual(e.value,t)})}))}else{this.dataSource=t;this.value=this.multiple?[]:"";this.selectedOptionsState=[]}};t.prototype.getSelectedItem=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this.fwListOptions.getSelectedOptions()]}))}))};t.prototype.setSelectedValues=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.fwListOptions.setSelectedValues(t);this.renderInput();return[2]}))}))};t.prototype.setSelectedOptions=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.fwListOptions.setSelectedOptions(t);this.renderInput();return[2]}))}))};t.prototype.setFocus=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(e){this.hasFocus=true;(t=this.selectInput)===null||t===void 0?void 0:t.focus();return[2]}))}))};t.prototype.focusOnTagContainer=function(){this.tagRefs=__spreadArray([],this.tagContainer.getElementsByTagName("fw-tag"));this.tagArrowKeyCounter=this.value.length-1;this.focusOnTag(this.tagArrowKeyCounter)};t.prototype.focusOnTag=function(t){var e;(e=this.tagRefs[t])===null||e===void 0?void 0:e.setFocus()};t.prototype.clearInput=function(){if(!this.multiple&&this.value){this.renderInput();return}this.selectInput.value=""};t.prototype.isValueEqual=function(t,e){return this.multiple?t.includes(e.value):t===e.value};t.prototype.valueExists=function(){return this.value&&(this.multiple?this.value.length>0:!!this.value)};t.prototype.onInput=function(){this.searchValue=this.selectInput.value;if(this.selectInput.value){this.variant!=="mail"&&this.openDropdown()}else{this.multiple||this.setSelectedValues("");this.variant==="mail"&&this.closeDropdown()}};t.prototype.renderTags=function(){var t=this;if(this.multiple&&Array.isArray(this.value)){return this.selectedOptionsState.map((function(e){if(t.isValueEqual(t.value,e)){return n("fw-tag",{variant:t.tagVariant,graphicsProps:e.graphicsProps,text:e.text,disabled:e.disabled,value:e.value,focusable:false})}}))}};t.prototype.renderInput=function(){if(this.selectedOptionsState.length>0){if(this.selectInput){this.selectInput.value="";this.selectInput.value=this.multiple?this.selectInput.value:this.selectedOptionsState[0].text||""}}else{if(this.selectInput){this.selectInput.value=""}}};t.prototype.componentWillLoad=function(){var t=this;var e,i;this.boundary||(this.boundary=this.host.parentElement);this.checkSlotContent();if(this.variant==="mail"){this.caret=false;this.multiple=true}var n=Array.from(this.host.querySelectorAll("fw-select-option"));if(this.selectedOptions.length>0){this.selectedOptionsState=this.selectedOptions;this.value=this.multiple?this.selectedOptions.map((function(t){return t.value})):this.selectedOptions[0].value}if(this.multiple){if(this.multiple&&typeof this.value==="string"){throw Error("value must be a array of string when multiple is true")}this.value=((e=this.value)===null||e===void 0?void 0:e.length)>0?this.value:[]}else{this.value=this.value?this.value:""}var o=n.map((function(e){return{html:e.html,text:e.html?e.optionText:e.textContent,value:e.value,selected:t.isValueEqual(t.value,e)||e.selected,disabled:e.disabled,htmlContent:e.html?e.innerHTML:""}}));this.dataSource=o.length===0?this.options:o;if(!this.multiple&&this.value&&this.selectedOptions.length===0){this.selectedOptionsState=this.dataSource.filter((function(e){return t.value===e.value}))}else if(this.multiple&&this.value.length!==this.selectedOptions.length){this.selectedOptionsState=this.dataSource.filter((function(e){return t.isValueEqual(t.value,e)}))}if(((i=this.dataSource)===null||i===void 0?void 0:i.length)>0){var r=this.dataSource.filter((function(t){return t.selected}));var a=r.map((function(t){return t.value}));var s=this.multiple?a:a[0];if(a.length>0&&JSON.stringify(this.value)!==JSON.stringify(s)){this.value=s;this.selectedOptionsState=r}}this.host.addEventListener("focus",this.setFocus);this.hostId=this.host.id||""};t.prototype.componentDidLoad=function(){this.renderInput();this.didInit=true};t.prototype.disconnectedCallback=function(){this.host.removeEventListener("focus",this.setFocus)};t.prototype.expandWatcher=function(t){var e,i,n,o;if(this.variant==="button"){var r=(o=(n=(i=(e=this.host.shadowRoot)===null||e===void 0?void 0:e.querySelector(".select-container"))===null||i===void 0?void 0:i.querySelector("fw-button"))===null||n===void 0?void 0:n.shadowRoot)===null||o===void 0?void 0:o.querySelector("fw-icon");r&&(r.name=t?"chevron-up":"chevron-down")}};t.prototype.checkSlotContent=function(){this.hasHintTextSlot=a(this.host,"hint-text");this.hasWarningTextSlot=a(this.host,"warning-text");this.hasErrorTextSlot=a(this.host,"error-text")};t.prototype.getAriaDescribedBy=function(){if(this.state==="normal")return"hint-"+this.name;else if(this.state==="error")return"error-"+this.name;else if(this.state==="warning")return"warning-"+this.name;return null};t.prototype.render=function(){var t,e;var i=this;var r=this,a=r.host,u=r.name,h=r.value;s(a,u,h);return n(c,{inputId:this.name,label:this.label,labelId:this.label+"-"+this.name,state:this.state,hintTextId:"hint-"+this.name,hintText:this.hintText,hasHintTextSlot:this.hasHintTextSlot,errorTextId:"error-"+this.name,errorText:this.errorText,hasErrorTextSlot:this.hasErrorTextSlot,warningTextId:"warning-"+this.name,warningText:this.warningText,hasWarningTextSlot:this.hasWarningTextSlot,required:this.required},n("div",{"aria-disabled":this.disabled,class:{"has-focus":this.hasFocus}},n("div",{class:(t={"select-container":true},t[this.state]=true,t),role:"combobox","aria-controls":this.hostId+"-listbox","aria-haspopup":"listbox","aria-expanded":this.isExpanded,"aria-owns":this.hostId+"-listbox"},n("fw-popover",{distance:"8",trigger:"manual",ref:function(t){return i.popover=t},"same-width":this.sameWidth,placement:this.optionsPlacement,boundary:this.boundary},n("div",{slot:"popover-trigger",class:(e={"input-container":this.variant!=="button"},e[this.state]=true,e["select-disabled"]=this.disabled,e),onClick:function(){return i.innerOnClick()},onKeyDown:l(this.innerOnClick,true)},this.variant==="button"?n("fw-button",{style:{"--fw-button-label-vertical-padding":"7px"},"show-caret-icon":true,id:this.hostId+"-btn",color:"secondary",class:this.host.classList.value.includes("first")?"fw-button-group__button--first":"fw-button-group__button--last"},this.value):n(o,null,n("div",{class:"input-container-inner"},this.multiple&&n("div",{class:"tag-container",onFocus:this.focusOnTagContainer,ref:function(t){return i.tagContainer=t},onKeyDown:this.tagContainerKeyDown},this.renderTags()),n("input",{ref:function(t){return i.selectInput=t},class:{"multiple-select":this.multiple},autoComplete:"off",disabled:this.disabled,name:this.name,id:this.name,placeholder:this.valueExists()?"":this.placeholder||"",readOnly:this.readonly,required:this.required,type:this.type,value:"","aria-autocomplete":"list","aria-activedescendant":this.focusedOptionId,onInput:function(){return i.onInput()},onFocus:function(t){return i.innerOnFocus(t)},onBlur:function(t){return i.innerOnBlur(t)},"aria-invalid":this.state==="error","aria-describedby":"hint-"+this.name+" error-"+this.name})),this.isLoading?n("fw-spinner",{size:"small"}):this.caret&&n("span",{class:{"dropdown-status-icon":true,expanded:this.isExpanded}},n("fw-icon",{name:"chevron-down",size:8,library:"system"})))),n("fw-list-options",{ref:function(t){return i.fwListOptions=t},id:this.hostId+"-listbox",role:"listbox","aria-labelledby":this.labelledBy||this.hostId+"-label",notFoundText:this.notFoundText,debounceTimer:this.debounceTimer,noDataText:this.noDataText,search:this.search,selectedOptions:this.selectedOptions,variant:this.optionsVariant,"filter-text":this.searchValue,options:this.dataSource,value:this.value,multiple:this.multiple,max:this.max,disabled:this.disabled,checkbox:this.checkbox,allowDeselect:this.allowDeselect,slot:"popover-content"})))))};Object.defineProperty(t.prototype,"host",{get:function(){return r(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{dataSource:["optionsChangedHandler"],options:["onOptionsChange"],isExpanded:["expandWatcher"]}},enumerable:false,configurable:true});return t}());p([u({keyName:"search.noItemsFound"})],d.prototype,"notFoundText",void 0);p([u({keyName:"search.noDataAvailable"})],d.prototype,"noDataText",void 0);d.style=h}}}));