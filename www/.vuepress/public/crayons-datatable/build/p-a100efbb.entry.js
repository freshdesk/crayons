import{r as t,c as i,h as s,g as e}from"./p-8c82131c.js";import{m as h}from"./p-9a71ebc7.js";import{h as a,r as o}from"./p-a5f3811d.js";const n=["S","M","T","W","T","F","S"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let c=class{constructor(s){t(this,s),this.fwChange=i(this,"fwChange",7),this.mode="single date",this.dateFormat="DD-MM-YYYY",this.name="",this.getSupportedYears=()=>{const t=[];let i=1970;for(;i<2050;)t.push(i.toString()),i++;return t},this.getDayDetails=t=>{const i=t.index-t.firstDay,s=t.index%7;let e=t.month-1,a=Number(t.year);e<0&&(e=11,a--);const o=h([a,e]).daysInMonth()||0,n=(i<0?o+i:i%t.numberOfDays)+1;return{date:n,day:s,month:this._getValidDateInMonth(i,t),timestamp:h([t.year,t.month,n]).valueOf()}},this.getMonthDetails=(t,i)=>{const s=new Date(t,i).getDay(),e=h([t,i]).daysInMonth()||0,a=[];let o,n=0;for(let h=0;h<6;h++)for(let r=0;r<7;r++)o=this.getDayDetails({index:n,numberOfDays:e,firstDay:s,year:t,month:i}),a.push(o),n++;return a},this.setMonth=t=>{let i=Number(this.year),s=this.month+t;-1===s?(s=11,i--):12===s&&(s=0,i++),this.year=i.toString(),this.month=s,this.toMonth=11===this.month?0:this.month+1,this.toYear=0===this.toMonth?this.yearCalculation(this.year,1):this.year,this.monthDetails=this.getMonthDetails(i,s),this.nextMonthDetails=11===this.month?this.getMonthDetails(this.yearCalculation(this.year,1),0):this.getMonthDetails(this.year,this.month+1)},this.isCurrentDay=t=>t.timestamp===this.todayTimestamp,this.isSelectedDay=({timestamp:t})=>t===this.selectedDay||t===this.startDate||t===this.endDate,this.handleDateHover=t=>{this.startDate&&!this.endDate?(this.startDate>t.timestamp&&(this.endDate=this.startDate,this.startDate=void 0),this.dateHovered=t.timestamp):!this.startDate&&this.endDate&&(this.endDate<t.timestamp&&(this.startDate=this.endDate,this.endDate=void 0),this.dateHovered=t.timestamp)},this.isInRange=({timestamp:t})=>{const{endDate:i}=this,{startDate:s}=this;return s&&i&&t>=s&&t<=i},this.onDateClick=({timestamp:t})=>{this.showSingleDatePicker()?this.selectedDay=t:this.showDateRangePicker()&&(this.handleRangeSelection(t),this.dateHovered="")}}displayDatePicker(){this.showDatePicker=!0}handleButtonClick(t){const i=t.composedPath()[0].classList.value.includes("update-range-value"),s=t.composedPath()[0].classList.value.includes("update-date-value");i?(this.startDateFormatted=h(this.startDate).format(this.dateFormat),this.endDateFormatted=h(this.endDate).format(this.dateFormat),this.startDate&&this.endDate&&(this.value=this.startDateFormatted+" To "+this.endDateFormatted),this.fromDate=this.startDateFormatted,this.toDate=this.endDateFormatted,this.fwChange.emit({fromDate:this.startDateFormatted,toDate:this.endDateFormatted})):s&&(this.value=this.selectedDay?h(this.selectedDay).format(this.dateFormat):"",this.fwChange.emit(this.value)),this.showDatePicker=!1}handleMonthYearDropDownSelection(t){"FW-DATEPICKER"!==t.path[0].tagName&&t.stopPropagation();const i=t.detail&&t.detail.value;i&&("range"===this.mode?(this.handleDateRangeDropDownUpdate(t,i),this.nextMonthDetails=this.getMonthDetails(this.toYear,this.toMonth)):this.handleSingleDateDropDownUpdate(t,i),this.monthDetails=this.getMonthDetails(this.year,this.month))}handleSingleDateDropDownUpdate(t,i){const s=t.composedPath()[0].classList.value.includes("single-month-selector"),e=t.composedPath()[0].classList.value.includes("single-year-selector");s?this.month=r.indexOf(i):e&&(this.year=i)}handleDateRangeDropDownUpdate(t,i){const s=t.composedPath()[0].classList.value.includes("from-month-selector"),e=t.composedPath()[0].classList.value.includes("from-year-selector"),h=t.composedPath()[0].classList.value.includes("to-month-selector"),a=t.composedPath()[0].classList.value.includes("to-year-selector");s?(this.month=r.indexOf(i),11===this.month?(this.toMonth=0,this.toYear=this.yearCalculation(this.year,1)):this.toMonth=this.month+1):e?(this.year=i,this.toYear=11===this.month?this.yearCalculation(this.year,1):this.year):h?(this.toMonth=r.indexOf(i),0===this.toMonth?(this.month=11,this.year=this.yearCalculation(this.toYear,-1)):this.month=this.toMonth-1):a&&(this.toYear=i,this.year=0===this.toMonth?this.yearCalculation(this.toYear,-1):this.toYear)}yearCalculation(t,i){return(Number(t)+i).toString()}componentWillLoad(){this.year=h().year().toString(),this.month=h().month(),this.toMonth=11===this.month?0:this.month+1,this.toYear=0===this.toMonth?this.yearCalculation(this.year,1):this.year,this.monthDetails=this.getMonthDetails(this.year,this.month),this.todayTimestamp=h().startOf("date").valueOf(),this.setInitalValues()}setInitalValues(){if(this.nextMonthDetails=11===this.month?this.getMonthDetails(this.yearCalculation(this.year,1),0):this.getMonthDetails(this.year,this.month+1),this.placeholder=this.placeholder||("range"===this.mode?"Select Date Range":"Select Date"),this.supportedYears=this.getSupportedYears(),this.selectedDay=void 0!==this.value?h(this.value,this.dateFormat).valueOf():void 0,this.startDate=void 0!==this.fromDate?h(this.fromDate,this.dateFormat).valueOf():void 0,this.endDate=void 0!==this.toDate?h(this.toDate,this.dateFormat).valueOf():void 0,"range"===this.mode&&this.startDate&&this.endDate){const t=h(this.startDate).format(this.dateFormat),i=h(this.endDate).format(this.dateFormat);this.value=`${t} To ${i}`}}_getValidDateInMonth(t,i){if(void 0!==this.minDate&&void 0!==this.maxDate){if(t<0)return-1;const s=this.dateFormat||"DD-MM-YYYY",e=h(this.minDate,s),a=h(this.maxDate,s),o=h([i.year,i.month,t+1]);return e.valueOf()<=o.valueOf()&&o.valueOf()<=a.valueOf()?t>=i.numberOfDays?1:0:-1}return t<0?-1:t>=i.numberOfDays?1:0}isHoverInRange({timestamp:t}){const{startDate:i,endDate:s,dateHovered:e}=this;return i&&e&&t<=e&&t>=i||s&&e&&t>=e&&t<=s}handleRangeSelection(t){this.startDate&&this.endDate?(this.endDate=void 0,this.startDate=t):this.startDate&&!this.endDate?t>this.startDate?this.endDate=t:t<this.startDate&&(this.endDate=this.startDate,this.startDate=t):!this.startDate&&this.endDate?this.startDate=t:this.startDate||this.endDate||(this.startDate=t)}getCellStyle(t){let i="c-day-container";return 0!==t.month&&(i+=" disabled"),this.isCurrentDay(t)&&(i+=" highlight"),(this.isSelectedDay(t)||t.timestamp===this.dateHovered)&&(i+=" highlight-blue"),(this.isInRange(t)||this.isHoverInRange(t))&&(i+=" highlight-range"),t.timestamp===this.startDate&&(i+=" start-day"),t.timestamp===this.endDate&&(i+=" end-day"),this.startDate&&this.dateHovered<this.startDate&&t.timestamp===this.dateHovered||this.endDate&&this.dateHovered<this.endDate&&t.timestamp===this.dateHovered?i+=" start-day":this.startDate&&this.dateHovered>this.startDate&&t.timestamp===this.dateHovered&&(i+=" end-day"),i}renderCalendar(t){const i=t.map(((t,i)=>s("div",{class:this.getCellStyle(t),key:i},s("div",{class:"cdc-day"},s("span",{role:"button",tabindex:"0",onClick:()=>this.onDateClick(t),onMouseOver:()=>this.handleDateHover(t),onFocus:()=>this.handleDateHover(t),onKeyDown:a((()=>this.handleDateHover(t)))},t.date)))));return s("div",{class:"c-container"},s("div",{class:"cc-head"},n.map(((t,i)=>s("div",{key:i,class:"cch-name"},t)))),s("div",{class:"cc-body"},i))}showSingleDatePicker(){return this.showDatePicker&&"range"!==this.mode}showDateRangePicker(){return this.showDatePicker&&"range"===this.mode}render(){const{host:t,name:i,value:e}=this;return o(t,i,e),s("fw-popover",{"same-width":"false",distance:"8",placement:"bottom-start",fallbackPlacements:["top-start"]},s("fw-input",{slot:"popover-trigger",value:this.value,class:"date-input",placeholder:this.placeholder,readonly:!0}),this.showSingleDatePicker()?s("div",{class:"datepicker",slot:"popover-content"},s("div",{class:"mdp-container"},s("div",{class:"mdpc-head"},s("div",{class:"mdpch-button"},s("div",{role:"button",tabindex:"0",class:"mdpchb-inner",onClick:()=>this.setMonth(-1),onKeyDown:a((()=>this.setMonth(-1)))},s("span",{class:"mdpchbi-left-arrow"}))),s("div",{class:"mdpch-container"},s("span",{class:"mdpchc-month"},s("fw-select",{class:"single-month-selector",readonly:!0,value:r[this.month]},r.map(((t,i)=>s("fw-select-option",{value:t,key:i,selected:t===r[this.month]},t))))),s("span",{class:"mdpchc-year"},s("fw-select",{class:"single-year-selector",readonly:!0,value:this.year},this.supportedYears.map(((t,i)=>s("fw-select-option",{value:t,key:i,selected:t===this.year},t)))))),s("div",{class:"mdpch-button-right"},s("div",{role:"button",tabindex:"0",class:"mdpchb-inner",onClick:()=>this.setMonth(1),onKeyDown:a((()=>this.setMonth(1)))},s("span",{class:"mdpchbi-right-arrow"})))),s("div",{class:"mdpc-body"},this.renderCalendar(this.monthDetails))),s("div",{class:"mdpc-footer"},s("fw-button",{color:"primary",class:"update-date-value"},"Update"),s("fw-button",{color:"secondary",class:"close-date-picker"},"Cancel"))):"",this.showDateRangePicker()?s("div",{class:"daterangepicker",slot:"popover-content"},s("div",{class:"mdp-range-container"},s("div",{class:"mdpc-head"},s("div",{class:"mdpch-button"},s("div",{role:"button",tabindex:"0",class:"mdpchb-inner",onClick:()=>this.setMonth(-1),onKeyDown:a((()=>this.setMonth(-1)))},s("span",{class:"mdpchbi-left-arrow"}))),s("div",{class:"mdpch-container"},s("span",{class:"mdpchc-month"},s("fw-select",{class:"from-month-selector",readonly:!0,value:r[this.month]},r.map(((t,i)=>s("fw-select-option",{value:t,key:i,selected:t===r[this.month]},t))))),s("span",{class:"mdpchc-year"},s("fw-select",{class:"from-year-selector",readonly:!0,value:this.year},this.supportedYears.map(((t,i)=>s("fw-select-option",{value:t,key:i,selected:t===this.year},t)))))),s("div",{class:"mdpch-button-right"},s("div",{role:"button",tabindex:"0",class:"mdpchb-inner",onClick:()=>this.setMonth(1),onKeyDown:a((()=>this.setMonth(1)))},s("span",{class:"mdpchbi-right-arrow"}))),s("div",{class:"mdpch-container-right"},s("span",{class:"mdpchc-year"},s("fw-select",{class:"to-year-selector",readonly:!0,value:this.toYear},this.supportedYears.map(((t,i)=>s("fw-select-option",{value:t,key:i,selected:t===this.toYear},t))))),s("span",{class:"mdpchc-month"},s("fw-select",{class:"to-month-selector",readonly:!0,value:r[this.toMonth]},r.map(((t,i)=>s("fw-select-option",{value:t,key:i,selected:t===r[this.toMonth]},t))))))),s("div",{class:"body-container"},s("div",{class:"mdpc-body"},this.renderCalendar(this.monthDetails)),s("div",{class:"mdpc-body mdpc-body-right"},this.renderCalendar(this.nextMonthDetails)))),s("div",{class:"mdpc-range-footer"},s("fw-button",{color:"primary",class:"update-range-value"},"Update"),s("fw-button",{color:"secondary",class:"close-date-picker"},"Cancel"))):"")}get host(){return e(this)}};c.style=':host{font-family:-apple-system, blinkmacsystemfont, "Segoe UI", roboto, oxygen, ubuntu, cantarell, "Open Sans", "Helvetica Neue", sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}:host{position:relative}:host *{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mdp-container,.mdp-range-container{float:left;left:0;top:40px;width:300px;min-height:336px;background:#fff;overflow:hidden}.mdpc-footer,.mdpc-range-footer{float:left;left:0;top:344px;width:312px;padding:8px;background:#f3f5f7}.mdpc-footer fw-button,.mdpc-range-footer fw-button{float:right;margin-left:7px}.mdpc-range-footer{width:612px}.mdp-range-container{width:600px}.mdpc-head{height:53px}.mdpc-body{float:left;width:100%}.body-container{margin:0 10px}.body-container .mdpc-body{width:48%}.body-container .mdpc-body-right{float:right;border-left:1px solid #ebeff3;padding-left:10px}.mdpch-button,.mdpch-button-right{float:left;width:30px;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative}.mdpch-button-right{float:right}.mdpchb-inner:hover,.mdpchb-inner:focus{cursor:pointer;background:#ebeff3}.mdpchb-inner{float:left;height:20px;width:20px;border-radius:100%;line-height:35px;text-align:center;position:absolute;top:45%;left:50%;margin-left:-17px;margin-top:-11px}.mdpch-button-right .mdpchb-inner{left:75%}.mdpchbi-left-arrow,.mdpchbi-left-arrows,.mdpchbi-left-arrows::after,.mdpchbi-right-arrow,.mdpchbi-right-arrows,.mdpchbi-right-arrows::after{display:block;float:left;width:6px;height:6px;border-left:2px solid #92a2b1;border-bottom:2px solid #92a2b1;position:absolute}.mdpchbi-left-arrow,.mdpchbi-left-arrows,.mdpchbi-right-arrow,.mdpchbi-right-arrows{-webkit-transform:rotate(45deg);transform:rotate(45deg);left:50%;top:50%;margin-left:-2px;margin-top:-4px}.mdpchbi-right-arrow,.mdpchbi-right-arrows{-webkit-transform:rotate(225deg);transform:rotate(225deg);margin-left:-4px}.mdpchbi-left-arrows::after,.mdpchbi-right-arrows::after{content:"";left:3px;top:-5px}.mdpchbi-left-arrows{margin-left:-5px}.mdpchbi-right-arrows{margin-left:-2px}.mdpch-container,.mdpch-container-right{float:left;width:200px;height:100%}.mdpch-container-right{float:right}.mdpch-container-right .mdpchc-month,.mdpch-container-right .mdpchc-year{float:right}.mdpchc-year{float:left;height:30px;font-size:16px;color:#475867;text-align:center;width:90px}.mdpchc-month{float:left;font-size:16px;color:#475867;text-align:center;margin-right:10px;width:90px}.mdpchc-month fw-select .input-container-inner input{width:98%}.c-container,.c-day-container,.cc-body,.cc-head,.cch-name,.cdc-day,.cdc-day span{position:relative;display:block;float:left;-webkit-box-sizing:border-box;box-sizing:border-box}.c-container{width:100%;height:100%}.cc-head{height:30px;width:100%}.cch-name{width:14.285%;height:30px;line-height:30px;font-weight:700;color:#475867;font-size:13px;text-align:center}.cc-body{height:210px;width:100%}.c-day-container{width:14.285%;height:11.185%;margin-top:10px}.cdc-day{width:100%;height:100%;font-size:12px;font-weight:300;color:#475867;text-align:center}.cdc-day span:hover,.cdc-day span:focus{cursor:pointer;background:#ebeff3}.cdc-day span{width:24px;height:22px;font-size:13px;margin-top:-11px;margin-left:-13px;left:50%;top:50%;font-weight:400;border-radius:10%;line-height:20px;color:#12344d}.c-day-container.disabled{pointer-events:none}.date-input{width:210px}.c-day-container.disabled .cdc-day span{color:#cfd7df;background:#fff !important}.c-day-container.highlight:not(.disabled) .cdc-day span{border:1px solid #cfd7df}.c-day-container.highlight-blue:not(.disabled) .cdc-day span{background:#2c5cc5;color:#f3f5f7}.c-day-container.start-day .cdc-day{margin-left:10px}.c-day-container.start-day .cdc-day span{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.c-day-container.end-day .cdc-day{margin-left:-10px}.c-day-container.end-day .cdc-day span{-webkit-transform:translateX(10px);transform:translateX(10px)}.c-day-container.highlight-range:not(.disabled) .cdc-day{background:#e4f2fd}';export{c as fw_datepicker}